{% extends "base.html" %}

{% block head %}
<style>
{% include "focus-area-styles.css" %}

#project-icon {
  float: left;
  margin: 0 1em 1em 0;
  width: 75px;
}

h1 {
  margin: 0;
}

#project-status-bar {
  margin: 15px 0 30px 0;
}
  #project-status-bar > div {
    background-color: #F5F5F9;
    border: 1px solid #DBDBDC;
    color: #666;
  }
  #project-status-bar > div.active {
    background-color: #EEFFEE;
  }
    #project-status-bar > div div {
      white-space: pre;
      padding: 3px;
    }

div.subtitle {
  margin: .25em 0 .75em 0;
  font-weight: bold;
}

@media screen and (min-width: 992px) {
  #action-buttons button, #action-buttons a {
    display: block;
    width: 100%;
    margin-bottom: 15px;
  }
}
</style>
{% endblock %}

{% block breadcrumbs %}
  {% if folder %}
  <li>
    <a id="folder-link" href="{{folder.get_absolute_url}}" data-folder-id="{{folder.id}}" title="{{folder.title}}">
      <span class="glyphicon glyphicon-folder-open" style="margin-right: .25em"></span>
    </a>
  </li>
  {% endif %}
  {% for parent_project in project.get_parent_projects %}
    {% if not forloop.counter == 1 %} &gt; {% endif %}
    <li>
    <a href="{{parent_project.get_absolute_url}}" style="margin-left: .25em">
      {{parent_project.title}}
    </a>
    </li>
  {% endfor %}
    <li>
    <a href="{{project.get_absolute_url}}">
      {{project.title}}
    </a>
    </li>
  <li class="active">
    {{page_title}}
  </li>
{% endblock %}

{% block body %}
{{block.super}}
<div class="row">
  {% if is_project_page %}
  <div class="col-md-push-10 col-md-2">
    <div id="action-buttons" style="margin-bottom: 1em">
      {% block action_buttons %}
      {% endblock %}
    </div>
  </div>
  {% endif %}

  <div class="{% if is_project_page %}col-md-pull-2{% endif %} col-md-10">
    <div id="focus-area-wrapper">
      {% block above_title %}
      {% endblock %}

      {% if project.root_task.get_app_icon_url %}
        <img id="project-icon" src="{{project.root_task.get_app_icon_url}}">
      {% endif %}

      {% with project.title as title %}
      <h1>
        {{title}}
        {% block title_suffix_text %}
        {% endblock %}
      </h1>

      {% if title != project.root_task.module.spec.title %}
      <div class="subtitle">
        {{project.root_task.module.spec.title}}
      </div>
      {% endif %}
      {% endwith %}

      <div class="clearfix"></div>

      {% if project.lifecycle_stage %}
      <div id="project-status-bar" class="row">
        {% for stage in project.lifecycle_stage.0.stages %}
          <div class="{% for w in project.lifecycle_stage.0.stage_col_width %}col-{{w}} {% endfor %} {% if stage.complete %}active{% endif %}">
            <div>{{stage.label}}</div>
          </div>
        {% endfor %}
      </div>
      {% endif %}
      
      <div style="margin-top: 1em">
      {% block body_content %}
      {% endblock %}
      </div>
    </div> <!-- /focus-area-wrapper -->
  </div> <!-- /col -->
</div> <!-- /row -->

{% block modals %}
{% endblock %}

{% endblock %}
